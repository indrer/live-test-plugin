!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.escape=function(t,e){return String(t).replace(/["'`\\\b\f\n\r\t\u2028\u2029]/g,(function(t){if(e&&e.indexOf(t)>=0)return t;switch(t){case'"':case"'":case"`":case"\\":return"\\"+t;case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))},e.unescape=function(t){return String(t).replace(/\\["'`\\bfnrt]|\\u2028|\\u2029/g,(function(t){switch(t){case'\\"':case"\\'":case"\\`":case"\\\\":return t[1];case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\u2028":return"\u2028";case"\\u2029":return"\u2029"}}))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.r(e);var a=function(){function t(e){r(this,t),this.data=e,this.next=null}return o(t,[{key:"getNext",value:function(){return this.next}},{key:"getData",value:function(){return this.data}},{key:"addNext",value:function(t){this.next=t}},{key:"toString",value:function(){return this.data.toString()}}]),t}(),s=function(){function t(){r(this,t),this.head=null,this.tail=null,this.size=0}return o(t,[{key:"addNode",value:function(t){this.size++,null==this.head?(this.head=new a(t),this.tail=this.head):(this.tail.addNext(new a(t)),this.tail=this.tail.getNext())}},{key:"getSize",value:function(){return this.size}},{key:"getHeadNode",value:function(){return this.head}},{key:"toString",value:function(){if(null==this.head)return"";if(this.tail===this.head)return this.head.getData().toString();for(var t="",e=this.head;null!==e.getNext();)t=t+e.getData().toString()+"\n",e=e.getNext();return t+=e.getData().toString()}}]),t}(),u="visit",c="click",l="execute",d="input";function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.link=e}var e,n,r;return e=t,(n=[{key:"toString",value:function(){return'visit "'.concat(this.link,'"')}}])&&f(e.prototype,n),r&&f(e,r),t}();function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sel=e.uniqsel,this.text=e.textcont}var e,n,r;return e=t,(n=[{key:"toString",value:function(){var t='click "'.concat(this.sel,'"');return 0===this.text.length?t:t+' with text "'.concat(this.text,'"')}}])&&w(e.prototype,n),r&&w(e,r),t}(),v=n(0),m=function(t){return Object(v.escape)(t,["`","'","\t","\n","\r"])};function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=void 0===e?"":m(e)}var e,n,r;return e=t,(n=[{key:"toString",value:function(){return this.text.includes("\n")?"execute {{\n".concat(this.text,"\n}}"):"execute {{ ".concat(this.text," }}")}}])&&p(e.prototype,n),r&&p(e,r),t}();function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sel=e.uniqsel,this.text=e.textcont,this.inpt=void 0===n?"":n}var e,n,r;return e=t,(n=[{key:"toString",value:function(){var t='input "'.concat(m(this.inpt),'" to "').concat(this.sel,'"');return this.text.length>0&&(t+=' with text "'.concat(this.text,'"')),t}}])&&y(e.prototype,n),r&&y(e,r),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var k=function(){function t(e,n,r){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.action=null,e){case u:this.action=new g(r);break;case c:this.action=new h(n);break;case l:this.action=new b(r);break;case d:this.action=new S(n,r);break;default:console.log("Something went wrong")}}var e,n,r;return e=t,(n=[{key:"getAction",value:function(){return this.action}},{key:"toString",value:function(){return this.action.toString()}}])&&x(e.prototype,n),r&&x(e,r),t}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.sel=n.uniqsel,this.text=n.textcont}var e,n,r;return e=t,(n=[{key:"toString",value:function(){var t="expect to ".concat(this.type.replace("-"," "),' "').concat(this.sel,'"');return 0===this.text.length?t:t+' with text "'.concat(this.text,'"')}}])&&j(e.prototype,n),r&&j(e,r),t}();function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.instructions=new s,n&&this.instructions.addNode(new g(e))}var e,n,r;return e=t,(n=[{key:"getLastAdded",value:function(){return this.instructions.tail.toString()+"\n"}},{key:"getSize",value:function(){return this.instructions.getSize()}},{key:"addAction",value:function(t,e,n){var r=new k(t,e,n);this.instructions.addNode(r)}},{key:"addAssertion",value:function(t,e,n){var r=new I(t,e,n);this.instructions.addNode(r)}},{key:"addVisit",value:function(t){var e=new g(t);this.instructions.addNode(e)}},{key:"toString",value:function(){return this.instructions.toString()+"\n"}}])&&N(e.prototype,n),r&&N(e,r),t}(),L=function(t){var e=[],n="";if(t.id)return{uniqsel:"#"+t.id,textcont:n};for(;null!==t.parentNode;){if(t.id){e.unshift("#"+t.id),e=[e[0],e[e.length-1]];break}0===e.length?(n="img"===t.tagName.toLowerCase()||0===t.childNodes.length?"":null===t.childNodes[0].nodeValue?"":m(t.childNodes[0].nodeValue.trim()),"img"===t.tagName.toLowerCase()?e.unshift("img[src='".concat(m(t.src),"']")):e.unshift(t.tagName.toLowerCase())):e.unshift(t.tagName.toLowerCase()),t=t.parentNode}return{uniqsel:e.join(" "),textcont:n}};var E=null===window.sessionStorage.getItem("wtest")||0===window.sessionStorage.getItem("wtest").length;E&&chrome.extension.sendMessage({subject:"getTabId"},(function(t){window.localStorage.setItem("wtest-id",t.tabId)}));var O=new C(window.location.href,E),P=null,T=null,A=null;function q(t){t.stopPropagation();var e=L(t.target);if("clickreq"===P.subject)O.addAction(c,e,""),H("clicksel"),t.target.href&&(window.location.href=t.target.href);else if(t.target.addEventListener("click",z),"assertreq"===P.subject){var n=P.assertType;O.addAssertion(n,e,""),H("assertsel")}else if("havereq"===P.subject){var r=P.assertType;O.addAssertion(r,e,""),H("havesel")}else if("visitreq"===P.subject){if(t.target.href){var i=t.target.href;O.addAction(u,i)}else alert("The element does not contain any links!");H("visitsel")}window.localStorage.setItem("wtest-started",!0),null===window.sessionStorage.getItem("wtest")?window.sessionStorage.setItem("wtest",O.toString()):window.sessionStorage.setItem("wtest",window.sessionStorage.getItem("wtest")+O.getLastAdded()),D(t),document.removeEventListener("mousedown",q),document.removeEventListener("mouseover",_),document.removeEventListener("mouseout",D)}function M(t){A=L(t.target),H("inputstr",T=t.target.value)}function z(t){t.preventDefault(),t.target.removeEventListener("click",z)}function _(t){t.stopPropagation(),t.target.style.outline="2px solid red","img"===t.target.tagName.toLowerCase()?t.target.parentNode.appendChild(V(t)):t.target.appendChild(V(t))}function D(t){t.target.style.outline="";var e=null;"img"===t.target.tagName.toLowerCase()?(e=t.target.parentNode.querySelectorAll(".selector-text-wtest")[0],t.target.parentNode.removeChild(e)):(e=t.target.querySelectorAll(".selector-text-wtest")[0],t.target.removeChild(e))}function V(t){var e=t.target.offsetHeight,n=window.getComputedStyle(t.target,null).getPropertyValue("font-size"),r=parseFloat(n),i=L(t.target).uniqsel,o=document.createElement("p");return o.style="position: absolute;\n  margin-top: -".concat(e+5,"px;\n  background: red; \n  font-size: ").concat(.8*r>14?14:Math.floor(.8*r),"px; \n  font-weight: normal; \n  color: white;\n  padding: 0px;\n  z-index: 9999;"),o.classList.add("selector-text-wtest"),o.textContent=i,o}function H(t,e){chrome.runtime.sendMessage({from:"main",subject:t,inputString:e})}chrome.runtime.onMessage.addListener((function(t,e,n){null===window.localStorage.getItem("wtest-started")&&"activeTab"===t.subject&&window.localStorage.setItem("wtest-id",t.activeTab),chrome.runtime.sendMessage({subject:"getTabId"},(function(e){if(e.tabId==window.localStorage.getItem("wtest-id")){if(P=t,"windowClosing"===t.subject&&"testwin"===t.from)window.localStorage.removeItem("wtest-started"),window.sessionStorage.removeItem("wtest");else if("testwin"===t.from&&"testfin"!==t.subject)if("executereq"===t.subject){var r=P.executeString;O.addAction(l,"",r),H("executesel"),window.sessionStorage.setItem("wtest",(null===window.sessionStorage.getItem("wtest")?O.toString():window.sessionStorage.getItem("wtest"))+O.getLastAdded()),window.localStorage.setItem("wtest-started",!0)}else"inputreq"===t.subject?document.addEventListener("input",M):"inputfin"===t.subject?(document.removeEventListener("input",M),O.addAction(d,A,T),T=null,A=null,window.sessionStorage.setItem("wtest",(null===window.sessionStorage.getItem("wtest")?O.toString():window.sessionStorage.getItem("wtest"))+O.getLastAdded())):(document.addEventListener("mouseover",_),document.addEventListener("mouseout",D),document.addEventListener("mousedown",q));else"testwin"===t.from&&"testfin"===t.subject&&(i="test.wtest",o=null===window.sessionStorage.getItem("wtest")?"":window.sessionStorage.getItem("wtest"),(a=document.createElement("a")).href="data:text/plain;charset=utf-8,"+encodeURIComponent(o),a.download=i,a.click(),window.sessionStorage.removeItem("wtest"),window.localStorage.removeItem("wtest-started"),O=new C(window.location.href,!0));n()}var i,o,a}))}))}]);